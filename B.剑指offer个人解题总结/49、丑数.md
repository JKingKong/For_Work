# 35、丑数

## 题目描述

把只包含质因子2、3和5的数称作丑数（Ugly Number）。例如6、8都是丑数，但14不是，因为它包含质因子7。 习惯上我们把1当做是第一个丑数。求按从小到大的顺序的第N个丑数。

## 1、

### 1.解题思路

1. 一个丑数只含质因子：2，3，5 。

   1. 因此可以分解为：某个丑数$ = 2^{x}*3^{y}*5^{z}$ (x、y、z >= 0)
   2. 所以只需要把得到的丑数不断地乘以2、3、5之后并放入他们应该放置的位置即可

2. 此题的难点就在于如何有序的放在合适的位置

3. 1 * （2、3、5）= 2、3、5     (质因子：1 * )

   2 *（2、3、5）= 4、6、10    (质因子：2 * )

   3 * （2、3、5）= 6、9、15    (质因子：3 * )

   5 * （2、3、5）=10、15、25   (质因子：5 * )

4. **问题：从上边第3，可以看出如果不加策略地添加丑数是会有重复，而且我们题目要求第N个丑数，这样的方法得到的丑数也是无序的**

5. 做法：

   https://www.nowcoder.com/questionTerminal/6aa9e04fc3794f68acf8778237ba065b?f=discussion来源：牛客网

      **（1）丑数数组： 1**  

      **乘以2的队列：2**  

      **乘以3的队列：3**  

      **乘以5的队列：5**  

      **选择三个队列头最小的数2加入丑数数组，同时将该最小的数乘以****2,3,5****放入三个队列；**  

      **（2）丑数数组：1,2**  

   ​    **乘以2的队列：4**   

   ​    **乘以3的队列：3，6**   

   ​    **乘以5的队列：5，10**   

   ​    **选择三个队列头最小的数3加入丑数数组，同时将该最小的数乘以****2,3,5****放入三个队列；**   

   ​    **（3）丑数数组：1,2,3**   

   ​    **乘以2的队列：4,6**   

   ​    **乘以3的队列：6,9**   

   ​    **乘以5的队列：5,10,15**   

   ​    **选择三个队列头里最小的数4加入丑数数组，同时将该最小的数乘以****2,3,5****放入三个队列；**   

   ​    **（4）丑数数组：1,2,3,4**   

   ​    **乘以2的队列：6，8**   

   ​    **乘以3的队列：6,9,12**   

   ​    **乘以5的队列：5,10,15,20**   

   ​    **选择三个队列头里最小的数5加入丑数数组，同时将该最小的数乘以****2,3,5****放入三个队列；**   

   ​    **（5）丑数数组：1,2,3,4,5**   

   ​    **乘以2的队列：6,8,10，**   

   ​    **乘以3的队列：6,9,12,15**   

   ​    **乘以5的队列：10,15,20,25**   

   ​    **选择三个队列头里最小的数6加入丑数数组，但我们发现，有两个队列头都为6，所以我们弹出两个队列头，同时将12,18,30放入三个队列；**   

   ​    **……………………**   

   ​    **疑问：**   

   ​    **1.为什么分三个队列？**   

   ​    丑数数组里的数一定是有序的，因为我们是从丑数数组里的数乘以2,3,5选出的最小数，一定比以前未乘以2,3,5大，同时对于三个队列内部，按先后顺序乘以2,3,5分别放入，所以同一个队列内部也是有序的；   

   ​    **2.为什么比较三个队列头部最小的数放入丑数数组？**   

   ​    因为三个队列是有序的，所以取出三个头中最小的，等同于找到了三个队列所有数中最小的。   

   ​    **实现思路：**   

   ​      **我们没有必要维护三个队列，只需要记录三个指针显示到达哪一步；“|”表示指针,arr表示丑数数组；**   

   ​    **（1）arr: 1**   

   ​    **|2**   

   ​    **|3**   

   ​    **|5**   

   ​    **目前指针指向p2=0,p3=0,p5=0**

   ​    **队列头arr[p2] \* 2 = 2,  arr[p3] \* 3 = 3,  arr[p5] \* 5 = 5**   

   ​    **（2）arr:  1 2**   

   ​    **2 |4**   

   ​    **|3 6**   

   ​    **|5 10**   

   ​    **目前指针指向p2=1,p3=0,p5=0**   

   ​	**队列头arr[p2] \* 2 = 4,  arr[p3] \* 3 = 3, arr[p5] \* 5 = 5**

   ​    **（3）arr:  1 2 3**   

   ​    **2| 4 6**   

   ​    **3 |6 9**    

   ​    **|5 10 15**   

      **目前指针指向p2=1,p3=1,p5=0**

   ​	**队列头arr[p2] \* 2 = 4,  arr[p3] \* 3 = 6, arr[p5] \* 5 = 5**

   ·········

### 2.代码

```java
public class Solution {
    public int GetUglyNumber_Solution(int index) {
        // index = 0--6的丑数,分别为0-6
        if(index < 7) return index;
        int p2=0,p3=0,p5=0,newNum = 1;
        int[] uglyNumber = new int[index];
        uglyNumber[0] = 1;
        for(int i=1;i < index;i++){
       newNum = Math.min(uglyNumber[p2] * 2,Math.min(uglyNumber[p3]*3,uglyNumber[p5]* 5))
            //数组中加入一个新的丑数
            uglyNumber[i] = newNum;
            //这三个if有可能进入一个或者多个，进入多个是三个队列头最小的数有多个的情况
            if(uglyNumber[i] == uglyNumber[p2] * 2) p2++;
            if(uglyNumber[i] == uglyNumber[p3] * 3) p3++;
            if(uglyNumber[i] == uglyNumber[p5] * 5) p5++;
        }
        return uglyNumber[index - 1];
    }
}
```

### 3.复杂度

- 时间复杂度：O(n)
- 空间复杂度：O(n)

### 4.遇到的坑

- 分解为：某个丑数$ = 2^{x}*3^{y}*5^{z}$ (x、y、z >= 0)
- 如何有序的将丑数放在合适的位置